/**
Title: ‰∏≠ÂõΩÁßªÂä®Á≠æÂà∞
Nomination / Category: QuanmuteX
Written by: lslive
Date: 2025-10-11
Draft Version: 0.1
Contact Info: https://github.com/lslive
Notes: Âè™ÊµãËØïËøáÂúàXÔºåÂÖ∂ÂÆÉÁéØÂ¢ÉËØ∑Ëá™Ë°åÂ∞ùËØï
*/


var _0xodK='jsjiami.com.v7';const _0x8ba96b=_0x2407;(function(_0x16d8d2,_0x2ca67f,_0x156b3e,_0x117b8c,_0x382103,_0x57ba20,_0x3fbe4a){return _0x16d8d2=_0x16d8d2>>0x3,_0x57ba20='hs',_0x3fbe4a='hs',function(_0x2d5640,_0x1151ef,_0x51d4c5,_0xa1a127,_0x3142d4){const _0x8abef8=_0x2407;_0xa1a127='tfi',_0x57ba20=_0xa1a127+_0x57ba20,_0x3142d4='up',_0x3fbe4a+=_0x3142d4,_0x57ba20=_0x51d4c5(_0x57ba20),_0x3fbe4a=_0x51d4c5(_0x3fbe4a),_0x51d4c5=0x0;const _0x5a8aac=_0x2d5640();while(!![]&&--_0x117b8c+_0x1151ef){try{_0xa1a127=parseInt(_0x8abef8(0x19a,'(McM'))/0x1*(parseInt(_0x8abef8(0x164,'$LCK'))/0x2)+-parseInt(_0x8abef8(0x16b,'HabB'))/0x3*(parseInt(_0x8abef8(0x195,'[i8w'))/0x4)+parseInt(_0x8abef8(0x174,'WJAE'))/0x5*(parseInt(_0x8abef8(0x160,'BN*P'))/0x6)+parseInt(_0x8abef8(0x16a,'s2QA'))/0x7+-parseInt(_0x8abef8(0x15d,']swg'))/0x8+parseInt(_0x8abef8(0x190,')ON3'))/0x9*(parseInt(_0x8abef8(0x17b,'Rjl4'))/0xa)+-parseInt(_0x8abef8(0x18b,'A45%'))/0xb;}catch(_0x8f7ba){_0xa1a127=_0x51d4c5;}finally{_0x3142d4=_0x5a8aac[_0x57ba20]();if(_0x16d8d2<=_0x117b8c)_0x51d4c5?_0x382103?_0xa1a127=_0x3142d4:_0x382103=_0x3142d4:_0x51d4c5=_0x3142d4;else{if(_0x51d4c5==_0x382103['replace'](/[FQPxBqXIKrtRHlkpG=]/g,'')){if(_0xa1a127===_0x1151ef){_0x5a8aac['un'+_0x57ba20](_0x3142d4);break;}_0x5a8aac[_0x3fbe4a](_0x3142d4);}}}}}(_0x156b3e,_0x2ca67f,function(_0x2a8dbd,_0x30c336,_0xce31c4,_0x4b3add,_0x472c13,_0x2f3cb6,_0x222ca2){return _0x30c336='\x73\x70\x6c\x69\x74',_0x2a8dbd=arguments[0x0],_0x2a8dbd=_0x2a8dbd[_0x30c336](''),_0xce31c4='\x72\x65\x76\x65\x72\x73\x65',_0x2a8dbd=_0x2a8dbd[_0xce31c4]('\x76'),_0x4b3add='\x6a\x6f\x69\x6e',(0x1bdaa7,_0x2a8dbd[_0x4b3add](''));});}(0x638,0xc8d7c,_0x3dba,0xc9),_0x3dba)&&(_0xodK=0xc9);function _0x3dba(){const _0xaeb33a=(function(){return[_0xodK,'XxjskQKjGiRaIrmilq.PFckQoRm.Bv7RxXHpKtkG==','56+j5yI+5OMb5yUn','qCo7tWn0xLZdI2FcUa5urW','WORdMuOMAmkhcSkj','WQFdJf3dPL4','W5xcIwSmASk6','WQdcLmkMuW','WRZdUJddHLVdJbunFmoQWPFcVW','4P6M6k6F5ysU6i6g5y6wumkQW58','W63cHheXDW','WR9ncmoGl8kNvMf2WQ96DW','W65ev8oZ','6i+95y+556YM5yI6esFcVbesW5tMIAVLI4FWNj+n','ASoxkbhdQslcUd3dIZW','m8oCW4xcIeq','WOxcIfZcQCooqWeSW75YWQNdGSozoXpcISkNcCkzWRrIWPKyAmkllmojW6ZcMSkFW5JcQNfrWPvBc0JcGW8fWOSFrcXrsH4etG','4PYcz+ISN+AWOUMwSEIVMfZORjxMM7VMLkC9W4vjbq','W7RcTcZdH1NdJen/mmoTWOK','W6jkxSoV','W7vzxSkXACoYgH82','gSo1k20L','ehLAW4pcKSkn','rSofW58+vCo8W4C','WOKqnMq'].concat((function(){return['WQZdLIO','WRtcJqRdM2RdNSobd3BdU0VdNea','WPXcie3cNmo2bCoEEmk8WP5eEsa','W6DMW4Hme8kxW68','qc3cP03dTCkHWPy','WP8gaLqMgCkhW7hcHW','WPPrF8k+W7i','sSkzjhmWWRHFWRe','wCk1WQtcI8o2WOJcOCoperK','fXldNSouWQ4','WP5cAmkJW4BdP8oD','DmoHW4/cN1aFqa','W6NcGvlcVIaRpKa','WR1FEsCjWR8','rNVcGeODbXdcPmo0xuLuWOdcMbRdSSkfzxSAhXNcQLjQxmoyWO3dVmoMxCo6W7BcJ3VcGuqYWPHmWPRdHXXYDubSk8k4b0dcG1VdMrrmm3NcR8oCDSkaW4tcTSkIC8kMWRJdSSorWPlcGYxdReDyWQ8Cmx/dNCohW7noW4NdPSk0WPCgWPrAwSkiy8ogu8kgW6ldUwVcUCoQnCkWWRNdOmofaSob','W7BdNNFcQtK','W7b7W5bnkmkTW4XrWOvUFCobW5ZcPW','hGVcLCkxpt4c','wKldOSk6Ea','mSo1W75ZCq','W68lsSk8Dmo0wvf9WQrKpSkMWQqItW5SqmowWQlcMCkVnCoJzCo/WOFcHmoy','W4Tqee7dU8kzWR9W','W4ZdIMXola','W7JdQCkpW4n1','W5X/FSoSaq'].concat((function(){return['yCoWW6OtF8oaW6C','W7FcLhTeW4xdUwXlw8ogAmkwWOW','W5tcPuBcMqFcMW','x2pdTmkAj8kAWQRcR2pdOq','W7ldT8kXWRBdVCklnfBcLCk0W4rlEq','WOngCCkS','W5BcG2Sny8kNpCkwBq','lCojW7veFW','D8k5EmokW77cP2RcRmkzm8o6af8','WRdcP8kSWPW','wWNcHCkycq','fSotW6S','oH1sAthcQ8kN','W4rzW7S','bCoth8oYyHb1xG0HWOneW7dcNa','gxVdTb7cOCoNWQGFW7ldMMGw','v8k0udyO','W7ldTSk3WRxdU8kmpZNcLmkUW6TrCCoI','W43dLwNcMWu','aSoxwCkdgeKZpW','tSkUWQVcMG','qr/cTG'];}()));}()));}());_0x3dba=function(){return _0xaeb33a;};return _0x3dba();};const $=new Env('YiDong\x20Á≠æÂà∞ÊâìÂç°'),ckName=_0x8ba96b(0x15e,'DddO');function _0x2407(_0x31a24b,_0x30078a){const _0x3dba34=_0x3dba();return _0x2407=function(_0x24079f,_0x39b471){_0x24079f=_0x24079f-0x15c;let _0x4b152b=_0x3dba34[_0x24079f];if(_0x2407['fFLPrp']===undefined){var _0x52c9e6=function(_0x2b24c3){const _0x53674e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x514ada='',_0x593906='';for(let _0x386a3d=0x0,_0xf0a6b7,_0x188d90,_0x185866=0x0;_0x188d90=_0x2b24c3['charAt'](_0x185866++);~_0x188d90&&(_0xf0a6b7=_0x386a3d%0x4?_0xf0a6b7*0x40+_0x188d90:_0x188d90,_0x386a3d++%0x4)?_0x514ada+=String['fromCharCode'](0xff&_0xf0a6b7>>(-0x2*_0x386a3d&0x6)):0x0){_0x188d90=_0x53674e['indexOf'](_0x188d90);}for(let _0x249c6a=0x0,_0x3c20dd=_0x514ada['length'];_0x249c6a<_0x3c20dd;_0x249c6a++){_0x593906+='%'+('00'+_0x514ada['charCodeAt'](_0x249c6a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x593906);};const _0x12ef9a=function(_0x2c2a87,_0x3ab85a){let _0x4811e2=[],_0x24dd06=0x0,_0x4eb864,_0x1655e4='';_0x2c2a87=_0x52c9e6(_0x2c2a87);let _0x1959e9;for(_0x1959e9=0x0;_0x1959e9<0x100;_0x1959e9++){_0x4811e2[_0x1959e9]=_0x1959e9;}for(_0x1959e9=0x0;_0x1959e9<0x100;_0x1959e9++){_0x24dd06=(_0x24dd06+_0x4811e2[_0x1959e9]+_0x3ab85a['charCodeAt'](_0x1959e9%_0x3ab85a['length']))%0x100,_0x4eb864=_0x4811e2[_0x1959e9],_0x4811e2[_0x1959e9]=_0x4811e2[_0x24dd06],_0x4811e2[_0x24dd06]=_0x4eb864;}_0x1959e9=0x0,_0x24dd06=0x0;for(let _0x41b4a7=0x0;_0x41b4a7<_0x2c2a87['length'];_0x41b4a7++){_0x1959e9=(_0x1959e9+0x1)%0x100,_0x24dd06=(_0x24dd06+_0x4811e2[_0x1959e9])%0x100,_0x4eb864=_0x4811e2[_0x1959e9],_0x4811e2[_0x1959e9]=_0x4811e2[_0x24dd06],_0x4811e2[_0x24dd06]=_0x4eb864,_0x1655e4+=String['fromCharCode'](_0x2c2a87['charCodeAt'](_0x41b4a7)^_0x4811e2[(_0x4811e2[_0x1959e9]+_0x4811e2[_0x24dd06])%0x100]);}return _0x1655e4;};_0x2407['rSAgTu']=_0x12ef9a,_0x31a24b=arguments,_0x2407['fFLPrp']=!![];}const _0x204f97=_0x3dba34[0x0],_0x5c4da7=_0x24079f+_0x204f97,_0x7d992f=_0x31a24b[_0x5c4da7];return!_0x7d992f?(_0x2407['nCpzYV']===undefined&&(_0x2407['nCpzYV']=!![]),_0x4b152b=_0x2407['rSAgTu'](_0x4b152b,_0x39b471),_0x31a24b[_0x5c4da7]=_0x4b152b):_0x4b152b=_0x7d992f,_0x4b152b;},_0x2407(_0x31a24b,_0x30078a);}let userCookie=$[_0x8ba96b(0x168,'CiZW')](ckName);async function signYiDong(){const _0xbb0e4b=_0x8ba96b,_0x3eae86={'HIrSL':function(_0x129152,_0x130ece){return _0x129152===_0x130ece;},'uZNoS':_0xbb0e4b(0x172,'TSJ6')},_0x5d3697=_0xbb0e4b(0x180,'4%]6'),_0x2e208f={'Content-Type':_0xbb0e4b(0x19d,'Rjl4'),'x-requested-with':_0xbb0e4b(0x199,'n8Z%'),'Origin':'https://wx.10086.cn','Host':_0xbb0e4b(0x182,'DddO'),'Referer':'https://wx.10086.cn/qwhdhub/qwhdmark/1021122301?channelId=P00000057578&yx=1099157070',...userCookie},_0xb21558=_0xbb0e4b(0x184,'Rjl4')+$['time']('yyyyMMdd')+'\x22}';try{const _0x38daa2=await $[_0xbb0e4b(0x165,'hkqF')]['post']({'url':_0x5d3697,'headers':_0x2e208f,'body':_0xb21558});if(_0x3eae86[_0xbb0e4b(0x19c,'4%!W')](_0x38daa2[_0xbb0e4b(0x191,'Zzf0')],0xc8)){const _0x4d5976=JSON['parse'](_0x38daa2[_0xbb0e4b(0x17c,'s7&i')]);console['log'](_0x4d5976),$['msg']('‚úÖ\x20'+$['name']+':\x20'+(_0x4d5976[_0xbb0e4b(0x171,'(McM')]||_0x3eae86[_0xbb0e4b(0x17f,'[&3g')]));}else $['log']('‚ö†Ô∏è\x20ËØ∑Ê±ÇÂ§±Ë¥•:\x20'+_0x38daa2['statusCode']+'\x0a'+_0x38daa2['body']);}catch(_0x1443aa){$[_0xbb0e4b(0x167,'4%!W')](_0xbb0e4b(0x181,'k&Pi')+_0x1443aa),await delectCK();}}async function getCookie(){const _0x474c0d=_0x8ba96b,_0x4c1709={'PTMfE':function(_0x221ccd,_0x48ba73){return _0x221ccd!=_0x48ba73;},'WuydB':_0x474c0d(0x15c,'emt4'),'iUYtS':_0x474c0d(0x15f,'Q4hA'),'fPciv':_0x474c0d(0x197,'$%DA'),'weTws':_0x474c0d(0x186,'5nLw'),'HiVwX':_0x474c0d(0x18c,'n8Z%'),'ixSLz':function(_0x569508,_0x36cf7e){return _0x569508!==_0x36cf7e;},'wvcwG':'KSBRc','PRsRr':_0x474c0d(0x17d,'9COn')};if($request&&_0x4c1709[_0x474c0d(0x1a1,'s7&i')]($request[_0x474c0d(0x196,'4sV(')],_0x4c1709[_0x474c0d(0x16e,'XVGv')])){if(_0x4c1709['ixSLz'](_0x4c1709[_0x474c0d(0x18f,'sFI1')],_0x474c0d(0x17a,'WJAE'))){const _0x36ffa4=$request[_0x4c1709[_0x474c0d(0x19f,'44Jj')]][_0x474c0d(0x17e,'C(lH')]||_0x4c1709['fPciv'],_0x2a0cab=$request[_0x4c1709[_0x474c0d(0x163,'4%!W')]]['Cookie'];$['setjson']({'User-Agent':_0x36ffa4,'Cookie':_0x2a0cab},ckName),$[_0x474c0d(0x189,']swg')]($[_0x474c0d(0x183,'s7&i')],'',_0x4c1709[_0x474c0d(0x19b,'Q4hA')]);}else{if(_0x91ddd8&&_0x4c1709['PTMfE'](_0x1ef2a6[_0x474c0d(0x176,'WJAE')],_0x474c0d(0x187,'emt4'))){const _0x130a04=_0x595f6c[_0x4c1709[_0x474c0d(0x175,'D7$d')]][_0x4c1709[_0x474c0d(0x185,')ON3')]]||_0x4c1709[_0x474c0d(0x16c,'VOrU')],_0x564fcf=_0x1844e5[_0x474c0d(0x18d,'HabB')][_0x4c1709[_0x474c0d(0x166,'(McM')]];_0x245b83[_0x474c0d(0x193,'sFI1')]({'User-Agent':_0x130a04,'Cookie':_0x564fcf},_0x2f9efc),_0x41e0b3['msg'](_0x35cb5f[_0x474c0d(0x161,'sFI1')],'','Ëé∑ÂèñÁ≠æÂà∞CookieÊàêÂäüüéâ');}_0x49d990[_0x474c0d(0x177,'gO(F')]();}}$['done']();}async function delectCK(){const _0x4f93bc=_0x8ba96b;$[_0x4f93bc(0x193,'sFI1')](null,ckName);}(async()=>{const _0xe06604=_0x8ba96b,_0x216859={'hdVpO':function(_0x2b56ac,_0x464ddc){return _0x2b56ac!=_0x464ddc;},'yMCgw':_0xe06604(0x18e,'%us7'),'sbHEd':function(_0x417d71){return _0x417d71();}};if(_0x216859[_0xe06604(0x1a0,'v6Z5')](typeof $request,_0x216859[_0xe06604(0x192,'^kcx')])){await getCookie();return;}if(!userCookie)return $[_0xe06604(0x169,'n8Z%')](_0xe06604(0x179,'%us7'));await _0x216859[_0xe06604(0x198,'XVGv')](signYiDong);})()['catch'](_0x9d59aa=>$[_0x8ba96b(0x162,'WJAE')][_0x8ba96b(0x188,'u4gt')](_0x9d59aa['message']||_0x9d59aa))['finally'](async()=>{const _0x199c3f=_0x8ba96b;$[_0x199c3f(0x170,'Zzf0')]();});var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("ËØ∑Ê±ÇË∂ÖÊó∂"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`üîî${this.name}, ÂºÄÂßã!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============üì£Á≥ªÁªüÈÄöÁü•üì£=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t,e);break;case"Node.js":this.log("",`‚ùóÔ∏è${this.name}, ÈîôËØØ!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`üîî${this.name}, ÁªìÊùü! üïõ ${t} Áßí`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}